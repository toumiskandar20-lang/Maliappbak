<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getFirestore, collection, getDocs, updateDoc, doc } 
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBfMUa-8vsUZ_1r5F79iSKOKqMre99lwbI",
  authDomain: "maliapp-63f91.firebaseapp.com",
  projectId: "maliapp-63f91",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø­ÙˆØ¨Ø§Øª
async function loadWithdrawals(){
  const snap = await getDocs(collection(db,"withdraw_requests"));
  const box = document.getElementById("list");
  box.innerHTML = "";

  snap.forEach(d=>{
    const w = d.data();
    box.innerHTML += `
      <div class="card">
        <p>ğŸ“§ ${w.email}</p>
        <p>ğŸ’° ${w.amount}</p>
        <p>ğŸ“Œ ${w.status}</p>

        ${w.status==="pending" ? `
          <button onclick="approve('${d.id}')">âœ… Ù‚Ø¨ÙˆÙ„</button>
          <button onclick="reject('${d.id}')">âŒ Ø±ÙØ¶</button>
        ` : ""}
      </div>
    `;
  });
}

window.approve = async (id)=>{
  await updateDoc(doc(db,"withdraw_requests",id),{
    status:"approved"
  });
  loadWithdrawals();
};

window.reject = async (id)=>{
  await updateDoc(doc(db,"withdraw_requests",id),{
    status:"rejected"
  });
  loadWithdrawals();
};

loadWithdrawals();
</script>

<style>
body{
  font-family:Arial;
  background:#111;
  color:#fff;
}
.card{
  background:#222;
  padding:15px;
  border-radius:10px;
  margin:10px 0;
}
button{
  margin:5px;
  padding:8px 12px;
  border:none;
  border-radius:6px;
}
</style>
</head>

<body>
<h2>ğŸ›  Admin â€“ Ø³Ø­ÙˆØ¨Ø§Øª</h2>
<div id="list"></div>
</body>
</html>
