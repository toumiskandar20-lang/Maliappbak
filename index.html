<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>MaliApp</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial;
  background:linear-gradient(135deg,#141e30,#243b55);
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
}
.card{
  background:#0f172a;
  width:360px;
  padding:20px;
  border-radius:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.5);
}
h2,h3{text-align:center;margin:10px 0;}
input,button{
  width:100%;
  padding:12px;
  margin:6px 0;
  border-radius:10px;
  border:none;
  font-size:15px;
}
input{background:#020617;color:#fff;border:1px solid #334155;}
button{
  background:#22c55e;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
button:disabled{
  background:#475569;
  color:#fff;
}
.task{
  background:#020617;
  padding:12px;
  border-radius:10px;
  margin:8px 0;
  border:1px solid #334155;
}
.timer{
  margin-top:5px;
  font-size:14px;
  color:#38bdf8;
}
.hide{display:none;}
</style>
</head>

<body>

<!-- ØªØ³Ø¬ÙŠÙ„ -->
<div class="card" id="registerBox">
<h2>MaliApp</h2>

<input id="phone" placeholder="ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
<input id="email" placeholder="ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
<input id="pass" type="password" placeholder="ğŸ”’ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<input id="pass2" type="password" placeholder="ğŸ”’ ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<input id="invite" placeholder="ğŸ”— Ø±Ù…Ø² Ø§Ù„Ø¯Ø¹ÙˆØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">

<button onclick="register()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
</div>

<!-- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ -->
<div class="card hide" id="appBox">
<h3>ğŸ‰ Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ</h3>
<p>ğŸ’° Ø§Ù„Ø±ØµÙŠØ¯: <span id="balance">0</span> Ù…Ø§Ù„ÙŠ</p>
<p>â­ Ø§Ù„Ù…Ø³ØªÙˆÙ‰: 1</p>

<h3>ğŸ“ Ù…Ù‡Ø§Ù… Ø§Ù„ÙŠÙˆÙ…</h3>
<div id="tasks"></div>
</div>

<script>
let balance = Number(localStorage.getItem("balance")) || 0;
let completed = JSON.parse(localStorage.getItem("tasksDone")) || [];

function register(){
  let p=document.getElementById("pass").value;
  let p2=document.getElementById("pass2").value;
  let e=document.getElementById("email").value;

  if(!e || !p || !p2){
    alert("Ø±Ø¬Ø§Ø¡Ù‹ Ø¥ÙƒÙ…Ø§Ù„ ÙƒÙ„ Ø§Ù„Ø®Ø§Ù†Ø§Øª");
    return;
  }
  if(p.length<6){
    alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø£Ù‚Ù„ Ù…Ù† 6 Ø£Ø­Ø±Ù");
    return;
  }
  if(p!==p2){
    alert("ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©");
    return;
  }

  localStorage.setItem("user",e);
  document.getElementById("registerBox").classList.add("hide");
  document.getElementById("appBox").classList.remove("hide");
  init();
}

function init(){
  document.getElementById("balance").innerText=balance;
  loadTasks();
}

function loadTasks(){
  let tasksBox=document.getElementById("tasks");
  tasksBox.innerHTML="";
  for(let i=1;i<=5;i++){
    let done = completed.includes(i);
    let div=document.createElement("div");
    div.className="task";
    div.innerHTML=`
      <b>Ù…Ù‡Ù…Ø© ${i}</b><br>
      <button ${done?"disabled":""} onclick="startTask(${i},this)">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
      <div class="timer" id="timer${i}"></div>
    `;
    tasksBox.appendChild(div);
  }
}

function startTask(id,btn){
  btn.disabled=true;
  let time=30;
  let t=document.getElementById("timer"+id);
  t.innerText=`â³ ${time} Ø«Ø§Ù†ÙŠØ©`;

  let interval=setInterval(()=>{
    time--;
    t.innerText=`â³ ${time} Ø«Ø§Ù†ÙŠØ©`;
    if(time<=0){
      clearInterval(interval);
      t.innerText="âœ… ØªÙ…Øª Ø§Ù„Ù…Ù‡Ù…Ø©";
      balance+=10;
      completed.push(id);
      localStorage.setItem("balance",balance);
      localStorage.setItem("tasksDone",JSON.stringify(completed));
      document.getElementById("balance").innerText=balance;
    }
  },1000);
}
</script>

</body>
</html>
